// ===== Manual datasets =====
const names = {
  baby: {
    cool: ["Liam","Noah","Oliver","Elijah","James","William","Benjamin","Lucas","Henry","Alexander","Ethan","Jacob","Michael","Daniel","Logan","Jackson","Levi","Sebastian","Mateo","Jack","Owen","Theodore","Aiden","Samuel","Joseph","John","David","Wyatt","Matthew","Luke","Asher","Carter","Julian","Grayson","Leo","Jayden","Gabriel","Isaac","Lincoln","Anthony","Dylan","Ezra","Thomas","Charles","Christopher","Jaxon","Maverick","Josiah","Isaiah","Andrew","Elias","Joshua","Nathan","Caleb","Ryan","Adrian","Miles","Eli","Nolan","Christian","Aaron","Cameron","Ezekiel","Colton","Luca","Landon","Hunter","Jonathan","Santiago","Axel","Easton","Cooper","Jeremiah","Angel","Roman","Connor","Jameson","Robert","Greyson","Jordan","Ian","Carson","Jaxson","Leonardo","Nicholas","Dominic","Austin","Everett","Brooks","Xavier","Kayden","Silas","Bennett","Declan","Waylon","Weston","Micah","Harrison","Nathaniel","Ezra"],
    unique: ["Aurelia","Caelum","Elowen","Seraphina","Thalassa","Orion","Elysia","Calliope","Isolde","Zephyr","Lucien","Valerian","Sapphira","Evander","Azura","Cyra","Leontius","Mireille","Oberon","Selene","Ambrose","Calista","Lyra","Isidore","Solene","Octavian","Nerissa","Cassius","Zyra","Perseus","Elara","Ariadne","Dorian","Amara","Ione","Nyssa","Coralie","Philemon","Liora","Astraea","Amias","Cosima","Eulalia","Fenella","Galadriel","Hadrian","Isolde","Kael","Lucasta","Meliora","Nysa","Ophelia","Philomena","Quillon","Riven","Selwyn","Tavish","Ulysses","Vanya","Wystan","Xanthe","Yvaine","Zinnia","Auberon","Briseis","Cyrene","Damara","Evania","Faelan","Gwyneira","Hesper","Icarus","Jovian","Kalista","Leocadia","Morrigan","Nicasia","Ophira","Parthenia","Quenby","Rhiannon","Soraya","Tindra","Ursa","Veradis","Winola","Xavia","Yolanthe","Zephyrus","Amaranthe","Bellerose","Cassian","Drystan","Eithne","Florent","Galen","Halcyon","Inara","Jareth","Kerensa"],
    modern: ["Aiden","Jayden","Mason","Caden","Brayden","Kayden","Zayden","Grayson","Landon","Peyton","Brooklyn","Addison","Harper","Kinsley","Paisley","Hadley","Everly","Aria","Nova","Isla","Levi","Eliana","Luna","Camila","Avery","Ella","Sofia","Scarlett","Mila","Chloe","Riley","Zoey","Layla","Ellie","Hazel","Lily","Aurora","Penelope","Stella","Nora","Evelyn","Savannah","Maya","Elena","Paislee","Emery","Skylar","Genesis","Parker","Madison","Carson","Hudson","Easton","Colton","Bryson","Jaxon","Bentley","Asher","Hunter","Cooper","Logan","Jackson","Grayson","Wyatt","Maverick","Carter","Archer","Silas","Knox","Rowan","Oakley","Brixton","Kaiser","Zion","Kyrie","Emberly","Brinley","Finley","Aubree","Remi","Sutton","Lennon","Oaklyn","Blakely","Karter","Tatum","Phoenix","Dakota","Reign","Winter","Journee","Amari","Rylee","Emersyn","Khalil","Zander","Kamari","Kyler","Brycen","Jazlyn"],
    MuslimNames: ["Ayaan","Rayyan","Zayan","Hamza","Areeb","Ibrahim","Yusuf","Amir","Dania","Zahra","Amina","Fatima","Hana","Sumaiya","Mariam","Safiya","Zara","Maryam","Anaya","Eman","Ali","Hassan","Hussain","Usman","Bilal","Omar","Khalid","Talha","Saad","Azlan","Arham","Rehan","Muzammil","Huzaifa","Imran","Salman","Faris","Rami","Nabeel","Idris","Mahnoor","Inaya","Ayat","Laiba","Hira","Aleena","Sana","Noor","Iqra","Sehrish","Zainab","Asiya","Khadija","Ayesha","Rukayya","Hafsa","Naila","Abeer","Amna","Samina","Shazia","Sadia","Hadia","Mehwish","Farah","Anam","Sadia","Fiza","Nimra","Lubna","Junaid","Shahid","Danish","Rashid","Tariq","Adnan","Ammar","Fahad","Shahzaib","Aqib","Saif","Sameer","Noman","Shayan","Arsalan","Shahbaz","Moiz","Hashir","Zohaib","Kamran","Alina","Bushra","Hafiza","Maliha","Areesha","Zunaira","Areeba","Hoorain","Mahira","Yusra"]
  },
  business: { cool:[
    "Blaze", "Vortex", "Pulse", "Drift", "Nova", "Zenith", "Crimson", "Echo", "Shadow", "Titan", "Apex", "Quantum", "Nebula", "Horizon", "Ignite", "Frost", "Luxe", "Orbit", "Phantom", "Radiant", "Sonic", "Flux", "Velocity", "Stellar", "Eclipse", "Vivid", "Strive", "Glide", "Ascend", "Summit", "Inferno", "Rogue", "Spectra", "Momentum", "Volt", "Cosmic", "Vanguard", "Prism", "Onyx", "PulseWave", "Ardent", "Fable", "Crave", "Luminous", "Edge", "Skyline", "Zen", "Shift", "Driftwood", "NovaCore", "Gravity", "Stratos", "Aero", "Flashpoint", "Radiance", "Obsidian", "Mystic", "Vibe", "OrbitX", "NextGen", "Celestial", "Glitch", "Fusion", "PulseTech", "Ignis", "SummitX", "QuantumLeap", "Lumina", "Solaris", "PhantomEdge", "Vector", "VelocityX", "Cosmo", "Specter", "NovaRise", "StellarWave", "EchoPoint", "CrimsonSky", "BlueNova", "ZenithLabs", "Aria", "RadiantCore", "Hyperion", "Lume", "EdgeTech", "VibeWave", "StriveX", "Infinity", "ApexWave", "FluxPoint", "SkyForge", "Luminary", "Spark", "Astral", "DriftLabs", "Nexus", "EchoLabs", "IgniteX", "Celestia", "PulseCore", "VortexLabs"
  ],  
   unique:[
"Axion", "NimbleFox", "Verity", "Cinder", "Fynix", "Kairo", "Oblio", "Liora", "Zephyr", "Quorra", "Auralis", "Veyron", "Oberon", "Talon", "Eryndor", "Lyric", "Sable", "Rune", "Orionis", "Elara", "Maven", "Nyx", "Calix", "Draven", "Veyra", "Zypher", "Alaris", "Kaelith", "Solara", "Thryve", "Xylo", "Virel", "Lucentia", "Arbion", "Calyx", "Nymeria", "Faylen", "Oryon", "Zerath", "Velaris", "Quintar", "Aelith", "Rivora", "Syris", "Velyra", "Drystan", "Lumora", "Xerion", "Faelix", "Tyris", "Azura", "Calyra", "Eryndra", "Kaelith", "Lunaris", "Orvion", "Sylvara", "Zorya", "Auron", "Nythera", "Veylin", "Cindral", "Olyric", "Xyvera", "Velora", "Fynora", "Thalix", "Quorix", "Lumira", "Aeryn", "Draxis", "Zyra", "Orlith", "Sylvaris", "Rynox", "Vyntra", "Kaelor", "Elyric", "Novara", "Azyra", "Talyx", "Xyron", "Liora", "Fynixia", "Oblira", "Zypheris", "Aelora", "Vynra", "Calyth", "Orvyn", "Nyxara", "Thryll", "Eryon", "Lunara", "Sylvix", "Orya", "Vireth", "Xandor", "Velith", "Quenara", "Auralyn", "Zythera", "Nivara"

  ],

   modern:[

"TechNova", "ByteForge", "NeoWave", "CodePulse", "DataCore", "CyberLink", "InnoTech", "PixelShift", "QuantumLabs", "CloudSphere", "NextGenTech", "FutureWorks", "InfoWave", "SmartEdge", "DigitalX", "TechRise", "CoreLogic", "VirtuLabs", "CyberNova", "NanoByte", "HyperTech", "Visionary", "CodeSphere", "TechFusion", "NeoCore", "Innova", "DataStream", "PixelForge", "QuantumEdge", "CloudWorks", "NextWave", "FutureLab", "InfoCore", "SmartLabs", "DigitalForge", "TechStream", "CoreSphere", "VirtuTech", "CyberWorks", "NanoLabs", "HyperCore", "VisionTech", "CodeForge", "TechNovaX", "NeoLabs", "InnoCore", "DataForge", "PixelLabs", "QuantumWorks", "CloudTech", "NextCore", "FutureTech", "InfoForge", "SmartTech", "DigitalCore", "TechWorks", "CoreLabs", "VirtuWorks", "CyberCore", "NanoForge", "HyperLabs", "VisionForge", "CodeLabs", "TechSphere", "NeoForge", "InnovaLabs", "DataCoreX", "PixelCore", "QuantumTech", "CloudForge", "NextLabs", "FutureCore", "InfoLabs", "SmartForge", "DigitalLabs", "TechCore", "CoreTech", "VirtuLabsX", "CyberForge", "NanoTech", "HyperWorks", "VisionLabs", "CodeCore", "TechForgeX", "NeoCoreLabs", "InnoForge", "DataLabs", "PixelWorks", "QuantumLabsX", "CloudCore", "NextTech", "FutureLabsX", "InfoWorks", "SmartCore", "DigitalWorks", "TechLabs", "CoreForge", "VirtuTechX", "CyberLabs", "NanoWorks", "HyperTechX", "VisionCore"

  ]
},
  gamer: { 
    cool: [
      "PixelBlaze", "ShadowStrike", "NeonNinja", "VortexRider", "FrostByte", "CrimsonWolf", "StormFang", "LunarEcho", "PhantomEdge", "GlitchMaster", "CyberRogue", "SkyHunter", "NovaPulse", "InfernoBlade", "RogueWave", "TitanRush", "DarkPulse", "VenomFang", "BlazeCore", "SpectraKnight", "CyberShadow", "NightFury", "QuantumStrike", "ViperNova", "PixelStorm", "SonicPhantom", "EdgeRunner", "ShadowPulse", "FireFang", "StormVortex", "NeonDrift", "RiftRider", "FlameCore", "NovaStrike", "SteelFang", "BlazeKnight", "DarkRogue", "CyberFlux", "LunarFury", "PhantomRider", "VortexKnight", "PixelFury", "StormCore", "NightRogue", "InfernoPulse", "TitanBlaze", "CrimsonPulse", "NeonFang", "QuantumRider", "RogueFlux", "ShadowDrift", "FireCore", "EdgeFury", "SkyNova", "CyberBlaze", "ViperPulse", "PixelKnight", "StormFury", "NightPulse", "BlazeRider", "LunarKnight", "PhantomFlux", "DarkFang", "NovaRogue", "TitanPulse", "CrimsonKnight", "NeonRogue", "QuantumFlux", "RogueBlaze", "ShadowFury", "InfernoKnight", "VortexPulse", "PixelBlazeX", "StormRider", "NightFlux", "CyberKnight", "LunarBlaze", "PhantomFury", "EdgeKnight", "BlazeFlux", "SkyFang", "TitanRogue", "CrimsonFlux", "NeonKnight", "QuantumBlaze", "RoguePulse", "ShadowKnight", "FireFury", "ViperBlaze", "PixelFlux", "StormKnight", "NightBlaze", "CyberPulse", "LunarFlux", "PhantomBlaze", "VortexRogue", "BlazeFury", "DarkKnight", "NovaFlux", "TitanBlazeX", "CrimsonFury", "NeonFlux", "QuantumKnight"
    ],
    unique:[
      "Aethor", "Nyvra", "Zypheron", "Krylon", "Fynixx", "Orvian", "Lyrixa", "Dravonix", "Xyrell", "Voryn", "Calyth", "Oryxion", "Talyrix", "Syrion", "Velora", "Azrynn", "Quorix", "Elvryn", "Zerith", "Auralyn", "Kaelix", "Vyntra", "Rynox", "Xandor", "Lumira", "Fynora", "Oblira", "Zythera", "Aelora", "Vireth", "Orvyn", "Sylvara", "Thryll", "Nythera", "Lunara", "Draxis", "Eryndra", "Veylin", "Cindral", "Olyric", "Xyvera", "Velith", "Faelix", "Tyris", "Azura", "Calyra", "Eryon", "Kaelor", "Orionis", "Sylvix", "Quenara", "Auron", "Nyxara", "Zorya", "Rivora", "Veyra", "Drystan", "Lumora", "Xerion", "Faylen", "Oryon", "Thalix", "Aelith", "Syris", "Velyra", "Draven", "Lucentia", "Arbion", "Nymeria", "Maven", "Lyric", "Sable", "Rune", "Oblio", "Liora", "Zephyr", "Quorra", "Auralis", "Veyron", "Oberon", "Talon", "Eryndor", "Verity", "Cinder", "NimbleFox", "Axion", "Kaelith", "Solara", "Thryve", "Xylo", "Virel", "ArbionX", "Luceria", "Fynixia", "Nyvoria", "Azrylia", "Dravora", "Orlith"
    ],
    modern:[
      "GameByte", "NeoPixel", "CodeStrike", "TechRogue", "CyberArena", "PixelForge", "NextGenPlay", "FutureGamers", "DigitalQuest", "HyperPixel", "NovaCore", "CloudPlay", "ByteWave", "VirtualEdge", "InnoGame", "TechPulse", "CyberStorm", "NeoQuest", "PixelLab", "GameSphere", "NextLevelX", "FutureForge", "DigitalFlux", "HyperCore", "NovaPlay", "CloudForge", "ByteCore", "VirtualPulse", "InnoPixel", "TechLabX", "CyberQuest", "NeoForge", "PixelCore", "GameLabs", "NextGenCore", "FuturePixel", "DigitalLab", "HyperPlay", "NovaForge", "CloudPixel", "ByteLab", "VirtualForge", "InnoCore", "TechPixel", "CyberLabs", "NeoCoreX", "PixelForgeX", "GameCore", "NextLevelLabs", "FutureLabX", "DigitalCore", "HyperForge", "NovaCoreX", "CloudCore", "ByteForgeX", "VirtualCore", "InnoLabsX", "TechForge", "CyberCoreX", "NeoLabs", "PixelLabsX", "GameForge", "NextGenLabs", "FutureCoreX", "DigitalForgeX", "HyperLabs", "NovaLabs", "CloudForgeX", "ByteCoreX", "VirtualLabs", "InnoForgeX", "TechLabs", "CyberForgeX", "NeoForgeX", "PixelCoreLabs", "GameLabsX", "NextCoreLabs", "FutureForgeX", "DigitalLabsX", "HyperCoreX", "NovaForgeX", "CloudLabs", "ByteLabsX", "VirtualForgeX", "InnoCoreLabs", "TechCoreX", "CyberLabsX", "NeoCoreLabs", "PixelForgeLabs", "GameCoreX", "NextLabsX", "FutureCoreLabs", "DigitalCoreLabs", "HyperForgeX", "NovaLabsX", "CloudCoreLabs", "ByteForgeLabs", "VirtualCoreLabs"
    ]
   }
};

// ===== Blog dataset =====
const blogs = [
  {
    id: 1,
    title: "Top 10 Baby Names of 2025",
    category: "Baby Names",
    tags: ["baby","trends","names"],
    content: `Choosing a baby name is exciting yet challenging.

1. Liam – Strong-willed warrior  
2. Noah – Comfort, rest  
3. Oliver – Olive tree, peace  
4. Elijah – My God is Yahweh  
5. James – Supplanter  

6. William – Resolute protector  
7. Benjamin – Son of the right hand  
8. Lucas – Light-giving  
9. Henry – Estate ruler  
10. Alexander – Defender of mankind

Pick a name that resonates with you and your family.`,
    comments: []
  },
  {
    id: 2,
    title: "How to Choose a Unique Business Name",
    category: "Business Names",
    tags: ["business","unique","names"],
    content: `Your business name creates the first impression.

1. Keep it short and memorable  
2. Make it relevant to your niche  
3. Avoid generic words  

4. Check domain availability  
5. Consider future expansion  
6. Ensure it aligns with your brand vision  

Examples: “NeuraForge”, “Lumosys”, “AstroLink”`,
    comments: []
  },
  {
    id: 3,
    title: "Cool Gamer Tags for Streaming",
    category: "Gamer Tags",
    tags: ["gamer","tags","cool"],
    content: `A great gamer tag helps you stand out.

1. Keep it unique and personal  
2. Avoid numbers unless necessary  
3. Make it easy to pronounce  

4. Check availability on platforms  
5. Add a creative twist  
6. Avoid offensive words`,
    comments: []
  },
  {
    id: 4,
    title: "Baby Naming Tips from Experts",
    category: "Tips",
    tags: ["baby","tips","names"],
    content: `Experts suggest a thoughtful approach:

1. Consider family traditions  
2. Think about meaning and origin  
3. Ensure the name sounds good with the surname  

4. Avoid trendy names if you want timeless appeal  
5. Check nicknames  
6. Say the full name aloud`,
    comments: []
  },
  {
    id: 5,
    title: "Branding Your Startup with the Right Name",
    category: "Business Names",
    tags: ["business","branding","startup"],
    content: `A strong business name builds your brand.

1. Make it memorable  
2. Ensure it is easy to spell  
3. Align with brand values  

4. Check legal availability  
5. Consider social media handles  
6. Keep future expansion in mind`,
    comments: []
  },
  {
    id: 6,
    title: "Modern Names for Babies in 2025",
    category: "Baby Names",
    tags: ["modern","baby","names"],
    content: `Trendy baby names for 2025 include:

1. Aiden  
2. Jayden  
3. Mason  

4. Caden  
5. Brayden  
6. Harper`,
    comments: []
  }
];

// ===== Structured Data: BlogPosting =====
function generateStructuredData() {
  const blogStructuredData = blogs.map(blog => ({
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": blog.title,
    "url": `https://yourwebsite.com/blog/${blog.id}`,
    "author": { "@type": "Person", "name": "AI Power Name Generator" },
    "datePublished": new Date().toISOString().split("T")[0],
    "description": blog.content.slice(0, 200),
    "keywords": blog.tags.join(", ")
  }));
  
  const script = document.createElement("script");
  script.type = "application/ld+json";
  script.textContent = JSON.stringify(blogStructuredData, null, 2);
  document.head.appendChild(script);
}
generateStructuredData();

// ===== DOM Elements =====
const chips = document.querySelectorAll(".chip");
const categorySelect = document.getElementById("category");
const generateBtn = document.getElementById("generateBtn");
const randomBtn = document.getElementById("randomBtn");
const clearBtn = document.getElementById("clearBtn");
const resultsDiv = document.getElementById("results");
const favoritesDiv = document.getElementById("favorites");
const downloadBtn = document.getElementById("downloadBtn");
const shareBtn = document.getElementById("shareBtn");
const blogPostsDiv = document.getElementById("blogPosts");
const blogSearch = document.getElementById("blogSearch");
const categoryBtns = document.querySelectorAll(".categoryBtn");

let selectedStyle = null;
let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

// ===== Favorites =====
function renderFavorites() {
  favoritesDiv.innerHTML = "";
  favorites.forEach(name => {
    const el = document.createElement("div");
    el.className = "name";
    el.innerHTML = `<strong>${name}</strong><div class="mini"><button onclick="removeFavorite('${name}')">Remove</button></div>`;
    favoritesDiv.appendChild(el);
  });
}
renderFavorites();

function addFavorite(name) {
  if (!favorites.includes(name)) {
    favorites.push(name);
    localStorage.setItem("favorites", JSON.stringify(favorites));
    renderFavorites();
  }
}
function removeFavorite(name) {
  favorites = favorites.filter(n => n !== name);
  localStorage.setItem("favorites", JSON.stringify(favorites));
  renderFavorites();
}
window.removeFavorite = removeFavorite;
window.addFavorite = addFavorite;

// ===== Chip selection =====
chips.forEach(chip => {
  chip.addEventListener("click", () => {
    chips.forEach(c => c.dataset.active = "false");
    chip.dataset.active = "true";
    selectedStyle = chip.dataset.style;
  });
});

// ===== Show name with animation =====
function showNameWithAnimation(container, name, style) {
  const el = document.createElement("div");
  el.className = "name";
  el.dataset.copied = "false";
  el.innerHTML = `<strong></strong><span class="pill">${style}</span><span class="copied">Copied!</span><div class="mini"><button onclick="addFavorite('${name}')">⭐</button></div>`;
  const strong = el.querySelector("strong");
  let i = 0;
  const interval = setInterval(() => {
    strong.textContent += name[i];
    i++;
    if (i === name.length) clearInterval(interval);
  }, 50);

  el.addEventListener("click", () => {
    navigator.clipboard.writeText(name);
    el.dataset.copied = "true";
    setTimeout(() => el.dataset.copied = "false", 1000);
  });
  container.appendChild(el);
}

// ===== Generate names (4 random) =====
generateBtn.addEventListener("click", () => {
  const category = categorySelect.value;
  if (!selectedStyle) {
    alert("Please select a style!");
    return;
  }
  const options = names[category][selectedStyle];
  resultsDiv.innerHTML = "";
  const shuffled = [...options].sort(() => Math.random() - 0.5);
  const randomNames = shuffled.slice(0, 4);
  randomNames.forEach(name => showNameWithAnimation(resultsDiv, name, selectedStyle));
});

// ===== Random mode =====
randomBtn.addEventListener("click", () => {
  const categoryKeys = Object.keys(names);
  const category = categoryKeys[Math.floor(Math.random() * categoryKeys.length)];
  const styleKeys = Object.keys(names[category]);
  const style = styleKeys[Math.floor(Math.random() * styleKeys.length)];
  const options = names[category][style];
  const randomName = options[Math.floor(Math.random() * options.length)];
  resultsDiv.innerHTML = "";
  showNameWithAnimation(resultsDiv, randomName, style);
});

// ===== Clear =====
clearBtn.addEventListener("click", () => {
  resultsDiv.innerHTML = "";
  chips.forEach(c => c.dataset.active = "false");
  selectedStyle = null;
});

// ===== Download favorites =====
downloadBtn.addEventListener("click", () => {
  const blob = new Blob([favorites.join("\n")], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "favorites.txt";
  a.click();
  URL.revokeObjectURL(url);
});

// ===== Share favorites =====
shareBtn.addEventListener("click", async () => {
  const text = "My favorite names:\n" + favorites.join(", ");
  if (navigator.share) {
    await navigator.share({ title: "AI Power Name Generator", text });
  } else {
    navigator.clipboard.writeText(text);
    alert("Copied favorites to clipboard!");
  }
});
// ===== Dynamic Meta Descriptions for Blogs =====
function generateMetaDescriptions() {
  blogs.forEach(blog => {
    let meta = document.createElement("meta");
    meta.name = "description";
    meta.content = blog.content.slice(0, 150) + (blog.content.length > 150 ? "..." : "");
    document.head.appendChild(meta);
  });
}
generateMetaDescriptions();

// ===== Generate Sitemap =====
function generateSitemap() {
  const urls = blogs.map(blog => `
    <url>
      <loc>https://yourwebsite.com/blog/${blog.id}</loc>
      <lastmod>${new Date().toISOString().split("T")[0]}</lastmod>
      <changefreq>weekly</changefreq>
      <priority>0.8</priority>
    </url>
  `).join("\n");

  const sitemap = `<?xml version="1.0" encoding="UTF-8"?>
  <urlset xmlns="https://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
      <loc>https://yourwebsite.com/</loc>
      <lastmod>${new Date().toISOString().split("T")[0]}</lastmod>
      <changefreq>daily</changefreq>
      <priority>1.0</priority>
    </url>
    ${urls}
  </urlset>`;

  // Optional: Download sitemap.xml
  const blob = new Blob([sitemap], { type: "application/xml" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "sitemap.xml";
  a.click();
  URL.revokeObjectURL(url);
}

// Call generateSitemap() when needed (e.g., admin click)


// ===== Blog rendering (SEO-friendly with internal linking) =====
function renderBlogs(filter = "", search = "") {
  blogPostsDiv.innerHTML = "";
  const filteredBlogs = blogs.filter(blog => {
    const matchesCategory = filter === "" || filter === "All" || blog.category === filter;
    const matchesSearch = blog.title.toLowerCase().includes(search.toLowerCase()) || blog.content.toLowerCase().includes(search.toLowerCase());
    return matchesCategory && matchesSearch;
  });

  filteredBlogs.forEach(blog => {
    const blogEl = document.createElement("article");
    blogEl.className = "blog-card";
    blogEl.setAttribute("itemscope", "");
    blogEl.setAttribute("itemtype", "https://schema.org/BlogPosting");

    const snippet = blog.content.slice(0, 200) + (blog.content.length > 200 ? "..." : "");
    blogEl.innerHTML = `
      <h3 itemprop="headline">${blog.title}</h3>
      <div class="meta">
        <span itemprop="author">AI Power Name Generator</span> | 
        <time itemprop="datePublished" datetime="${new Date().toISOString().split("T")[0]}">${new Date().toLocaleDateString()}</time>
        | Category: ${blog.category} | Tags: ${blog.tags.join(", ")}
      </div>
      <p class="blog-content" itemprop="articleBody" data-snippet="${snippet}" data-full="${blog.content}" data-expanded="false">${snippet}</p>
      ${blog.content.length > 200 ? `<button class="view-more-btn" onclick="toggleBlog(${blog.id})">View More</button>` : ""}
      <div class="related-posts">
        <strong>Related:</strong> ${blogs
          .filter(b => b.id !== blog.id && b.category === blog.category)
          .map(b => `<a href="#blog-${b.id}">${b.title}</a>`).join(", ")}
      </div>
      <div class="comment-section">
        <input type="text" placeholder="Add comment" id="comment-${blog.id}">
        <button onclick="addComment(${blog.id})">Comment</button>
        <div class="comment-list" id="commentList-${blog.id}"></div>
      </div>
    `;
    blogPostsDiv.appendChild(blogEl);
    renderComments(blog.id);
  });
}
renderBlogs();

// ===== Toggle View More / Less =====
function toggleBlog(blogId) {
  const blogEl = document.querySelector(`#blogPosts .blog-card:nth-child(${blogId})`);
  const contentEl = blogEl.querySelector(".blog-content");
  const btn = blogEl.querySelector(".view-more-btn");
  if (contentEl.dataset.expanded === "true") {
    contentEl.textContent = contentEl.dataset.snippet;
    contentEl.dataset.expanded = "false";
    btn.textContent = "View More";
  } else {
    contentEl.textContent = contentEl.dataset.full;
    contentEl.dataset.expanded = "true";
    btn.textContent = "View Less";
  }
}

// ===== Blog search =====
blogSearch.addEventListener("input", (e) => {
  renderBlogs("", e.target.value);
});

// ===== Blog comments =====
function addComment(blogId) {
  const input = document.getElementById(`comment-${blogId}`);
  const comment = input.value.trim();
  if (!comment) return;
  const storedComments = JSON.parse(localStorage.getItem(`blogComments-${blogId}`)) || [];
  storedComments.push(comment);
  localStorage.setItem(`blogComments-${blogId}`, JSON.stringify(storedComments));
  renderComments(blogId);
  input.value = "";
}
function renderComments(blogId) {
  const commentListDiv = document.getElementById(`commentList-${blogId}`);
  const storedComments = JSON.parse(localStorage.getItem(`blogComments-${blogId}`)) || [];
  commentListDiv.innerHTML = storedComments.map(c => `<div>• ${c}</div>`).join("");
}

window.addComment = addComment;
window.toggleBlog = toggleBlog;